const a={number:/^-?[1-9][0-9]?.?[0-9]*$/,integer:/^-?[1-9][0-9]*$/,phone:/^1[0-9]{10,10}$/,telphone:/^\+?[0-9]+([- ]?[0-9]+)*$/,email:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,password:/^.{4,32}$/,code:/^[a-zA-Z0-9]{4,10}$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")},q={int:"integer",bool:"boolean",double:"number",long:"number",eq:"equals",equalsTo:"equals"},x={required(e,t){return!((e.required===!0||e.required==="required")&&l(t))},format(e,t){if(l(t))return!0;switch(q[e.format]?q[e.format]:e.format){case"number":return a.number.test(t);case"integer":return a.int.test(t);case"boolean":return!(t!==!0&&t!==!1);case"phone":return a.phone.test(t);case"telphone":return a.telphone.test(t);case"email":return a.email.test(t);case"password":return a.password.test(t);case"inviteCode":return a.inviteCode.test(t);case"idcard":return a.idcard.test(t);case"url":return a.url.test(t)}return!0},range(e,t){return e.range&&Array.isArray(range)&&e.range.length>0?e.range.includes(t):!0},rangeNumber(e,t){return t=+t,!(!l(e.minimum)&&t<e.minimum||!l(e.maximum)&&t>e.maximum)},rangeLength(e,t){return!(!l(e.minLength)&&t.length<e.minLength||!l(e.maxLength)&&t.length>e.maxLength)},pattern(e,t){if(l(t))return!0;if(e.pattern){let r=e.pattern;return typeof r=="string"&&(r=new RegExp(r)),r.test(t)}return!0}};function l(e){return!!(e==null||typeof e=="string"&&!e||Array.isArray(e)&&!e.length||typeof e=="object"&&!Object.keys(e).length)}function h(e,t,r){let s=t;if(s&&r){if(Array.isArray(r))for(const i in r)s=s.replace("%"+i+"%",r[i]);else if(typeof r=="object")for(const i in r)s=s.replace("%"+i+"%",r[i])}return{isOk:!1,field:e,errorMessage:s}}function y(e,t,r,s){const i={isOk:!0,field:e,errorMessage:""},f=r[e],m=t.rules,O=t.label?t.label:e,u={};if(!m||!m.length||m.length<=0)return i;for(const g in m){const n=m[g];n.hasOwnProperty("required")?u.required||(u.required=n):n.hasOwnProperty("format")?u.format||(u.format=n):n.hasOwnProperty("equals")?u.equals||(u.equals=n):n.hasOwnProperty("range")?u.range||(u.range=n):n.hasOwnProperty("minimum")||n.hasOwnProperty("maximum")?u.rangeNumber||(u.rangeNumber=n):n.hasOwnProperty("minLength")||n.hasOwnProperty("maxLength")?u.rangeLength||(u.rangeLength=n):n.hasOwnProperty("pattern")?u.pattern||(u.pattern=n):n.hasOwnProperty("validateFunction")&&!u.validateFunction&&typeof n.validateFunction=="function"&&(u.validateFunction=n)}const b=["required","equals","format","range","rangeNumber","rangeLength","pattern","validateFunction"];for(const g in b){const n=b[g],o=u[n];if(o){const d={label:O};if(n==="equals"){const c=o.equals;if(r[c]!==f)return d.equalsTo=c,s&&s[c]&&s[c].label&&(d.equalsTo=s[c].label),h(e,o.errorMessage,d)}else if(n==="validateFunction"){let c="";const p=o.validateFunction(o,f,r,function(w){w&&w.length>0?c=w:c=o.errorMessage});if(c&&c.length>0)return h(e,c,d);if(p){if(p.isOk)continue;return i}else return h(e,o.errorMessage,d)}else if(!x[n](o,f))return n==="rangeNumber"?(d.min=o.minimum,d.max=o.maximum):n==="rangeLength"&&(d.minLength=o.minLength,d.maxLength=o.maxLength),h(e,o.errorMessage,d)}}return i}const L={isNumber(e){return a.number.test(e)},isInt(e){return a.int.test(e)},isPhone(e){return a.phone.test(e)},isTelphone(e){return a.telphone.test(e)},isEmail(e){return a.email.test(e)},isPassword(e){return a.password.test(e)},isInviteCode(e){return a.inviteCode.test(e)},isIdcard(e){return a.idcard.test(e)},isUrl(e){return a.url.test(e)},isEmptyValue(e){return l(e)},validate(e,t){const r={isOk:!0,field:"",errorMessage:""};if(!t)return r;for(const s in t){const i=y(s,t[s],e,t);if(!i||!i.isOk)return i}return r},validateField(e,t,r){const s={isOk:!0,field:"",errorMessage:""};if(!r)return s;for(const i in r){if(!e.includes(i))continue;const f=y(i,r[i],t,r);if(!f||!f.isOk)return f}return s},validateIgnoreField(e,t,r){const s={isOk:!0,field:"",errorMessage:""};if(!r)return s;for(const i in r){if(e&&e.length&&e.includes(i))continue;const f=y(i,r[i],t,r);if(!f||!f.isOk)return f}return s}};export{L as k};
